as.data.frame()
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base$ventana <- get_template2(base, title="nombre", title2 = "description", text="text")
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
View(base)
base <- base %>%
mutate(
description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, descripción, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
View(base)
base <- read_excel("prueba.xlsx")
library(readxl)
base <- read_excel("prueba.xlsx")
base <- base %>%
mutate(
description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, description, descripción, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base$wikipedias <- sub("es\\.wiki", "es.m.wiki", base$wikipedias)
base$Wiki <- ifelse(base$wikipedias=="NA", NA, base$wikipedias)
base$text <- ifelse(is.na(base$Wiki), "", paste0(base$wiki, renderLinks(base, "Wiki", target="mainframe", sites=sites)))
base$ventana <- get_template2(base, title="nombre", title2 = "description", text="text")
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
View(base)
View(base)
library(netCoin)
library(wikiTools)
library(tidyverse)
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
View(base)
base$descripción <- gsub("\\s*\\(.*?\\)", "", base$descripción)
View(base)
base$description <- gsub("\\s*\\(.*?\\)", "", base$description)
View(base)
base$description <- edit(base$description)
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base$ventana <- get_template2(base, title="nombre", title2 = "description", text="text")
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
library(netCoin)
library(wikiTools)
library(tidyverse)
base <- base %>%
mutate(
description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
View(base)
library(netCoin)
library(wikiTools)
library(tidyverse)
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
library(readxl)
base <- read_excel("prueba.xlsx")
baseO <- read_excel("obras.xlsx")
base <- base %>%
mutate(
description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, descripción, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
library(netCoin)
library(wikiTools)
library(tidyverse)
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
library(readxl)
base <- read_excel("prueba.xlsx")
baseO <- read_excel("obras.xlsx")
base <- base %>%
mutate(
description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, descripción, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
names <- readLines("nombres")
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$image <- paste0("imgs/",base$entity,".jpg")
base$ventana <- get_template2(base, title="label", text="description")
base <- base %>%
mutate(
description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, descripción, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
names(base)
base <- base %>%
mutate( # description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, descripción, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
base <- base %>%
mutate( # description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
names(base)
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$wiki <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki[1:3]
base <- base %>%
mutate( # description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, description, occupation, wikipedias, wiki, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
base$description <- gsub("\\s*\\(.*?\\)", "", base$description)
base$wikipedias <- sub("es\\.wiki", "es.m.wiki", base$wikipedias)
base$Wiki <- ifelse(base$wikipedias=="NA", NA, base$wikipedias)
base$text <- ifelse(is.na(base$Wiki), "", paste0(base$wiki, renderLinks(base, "Wiki", target="mainframe", sites=sites)))
base$ventana <- get_template2(base, title="nombre", title2 = "description", text="text")
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base <- base %>%
mutate( # description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, description, occupation, wikipedias, wikidata, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
names(base)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$image <- paste0("imgs/",base$entity,".jpg")
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$wiki <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$image <- paste0("imgs/",base$entity,".jpg")
base$links <- paste0(extractWiki(base$label,language="es"),
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", text="description", text="links")
base$ventana <- get_template2(base, title="label", text="links")
base <- base %>%
mutate( # description=ifelse(is.na(descripción), description, descripción),
description=paste0(toupper(substr(description, 1, 1)), substr(description, 2, nchar(description))),
image=ifelse(pic=="NA" | pic=="", "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))) %>%
select(label, description, occupation, wikipedias, wikidata, image) %>%
rename(nombre = label, ocupación = occupation) %>%
as.data.frame()
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
names(base)
base$ventana <- get_template2(base, title="label", text="links")
names(base)
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$wiki <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$image <- paste0("imgs/",base$entity,".jpg")
base$links <- paste0(extractWiki(base$label,language="es"),
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", text="links")
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
names(base)
base$wikipedias[1:3]
base$label[1:3]
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- paste0("imgs/",base$entity,".jpg")
base$links <- paste0(extractWiki(base$label,language="es"),
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", text="links")
autores <- exhibit(base, name="nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
View(base)
autores <- exhibit(base, name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base$info <- extractWiki(base$label,language="es")
base$info[1:5]
base$info[7:10]
base$wikipedias[7:10]
base$pic[8]
base$pic[7:9]
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", entity, ".jpg"))
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$info <- ifselse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", text="links")
autores <- exhibit(base, name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
names(base)
?exhibit
?get_template2
autores <- exhibit(base, name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base$ventana <- get_template2(base, title="label", title2="description", text="links")
autores <- exhibit(base, name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
autores <- exhibit(base, name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
save(base, file="Autores.RData")
if(FALSE) {
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
} else{
load("Autores.RData")
}
rm(list=ls())
if(FALSE) {
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
} else{
load("Autores.RData")
}
autores <- exhibit(base, name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
library(netCoin)
library(wikiTools)
library(tidyverse)
if(FALSE) {
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
} else{
load("Autores.RData")
}
f_A <- c("entity", "label", "description", "sex", "byear", "bcountry", "dyear", "dcountry", "occupation", "bplaceLat", "bplaceLon", "pic",  "wikipedias")
f_E <- c("Q", "Nombre", "Descripción", "Sexo", "Nace", "País nace", "Muere", "País fallece", "Ocupación", "lat", "lon", "imagen", "wiki")
indexes <- match(f_A, names(base))
names(base)[indexes] <- f_E
names(base)
campos <- c(f_E[1:9], "image", "ventana")
campos
autores <- exhibit(base[,campos], name="label", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
autores <- exhibit(base[,campos], name="Nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
M <- base
p <- as.data.frame(read_excel("OcupacionesI.xlsx", sheet="Ocupaciones"))
#### Modesto Escobar
# Sun Feb 23 20:34:03 2025 ------------------------------
# Recodifica
library("readxl")
p <- as.data.frame(read_excel("OcupacionesI.xlsx", sheet="Ocupaciones"))
p <- p[!is.na(p$categoría),] # Evita NA
cates <- names(table(p$categoría))
changes <-list()
M$Ocupación <- tolower(M$occupation)
M$disc <- ""
for(i in cates[c(3, 2, 4, 6, 5, 1, 8, 7)]){
changes[[i]]  <- p[p$categoría==i, "ocupación"]
for(j in 1:nrow(M)) {
x <- unlist(strsplit(M$Ocupación[j],"\\|"))
if(length(intersect(x, changes[[i]]))>0) M$disc[j] <- paste0(M$disc[j], "|", i)
}
}
M$disciplina <- sub("^\\|","", M$disc)
if(exists("base")) base$Disciplina <- M$disciplina
M$disciplina
names(M)
#### Modesto Escobar
# Sun Feb 23 20:34:03 2025 ------------------------------
# Recodifica
library("readxl")
M <- base
p <- as.data.frame(read_excel("OcupacionesI.xlsx", sheet="Ocupaciones"))
p <- p[!is.na(p$categoría),] # Evita NA
cates <- names(table(p$categoría))
changes <-list()
M$Ocupación <- tolower(M$Ocupación)
M$disc <- ""
for(i in cates[c(3, 2, 4, 6, 5, 1, 8, 7)]){
changes[[i]]  <- p[p$categoría==i, "ocupación"]
for(j in 1:nrow(M)) {
x <- unlist(strsplit(M$Ocupación[j],"\\|"))
if(length(intersect(x, changes[[i]]))>0) M$disc[j] <- paste0(M$disc[j], "|", i)
}
}
M$disciplina <- sub("^\\|","", M$disc)
if(exists("base")) base$Disciplina <- M$disciplina
M$disciplina
base$Ocupación <- M$disciplina
autores <- exhibit(base[,campos], name="Nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
if(FALSE) {
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
} else{
load("Autores.RData")
}
f_A <- c("entity", "label", "description", "sex", "byear", "bcountry", "dyear", "dcountry", "occupation", "bplaceLat", "bplaceLon", "pic",  "wikipedias")
f_E <- c("Q", "Nombre", "Descripción", "Sexo", "Nace", "País nace", "Muere", "País fallece", "Ocupación", "lat", "lon", "imagen", "wiki")
campos <- c(f_E[1:9], "image", "ventana")
indexes <- match(f_A, names(base))
names(base)[indexes] <- f_E
source("RecodeDisciplinas.R")
autores <- exhibit(base[,campos], name="Nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
if(FALSE) {
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(base$label,language="es"))
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
} else{
load("Autores.RData")
}
f_A <- c("entity", "label", "description", "sex", "byear", "bcountry", "dyear", "dcountry", "occupation", "bplaceLat", "bplaceLon", "pic",  "wikipedias")
f_E <- c("Q", "Nombre", "Descripción", "Sexo", "Nace", "País nace", "Muere", "País fallece", "Ocupación", "lat", "lon", "imagen", "wiki")
campos <- c(f_E[1:9], "image", "ventana")
indexes <- match(f_A, names(base))
names(base)[indexes] <- f_E
source("RecodeDisciplinas.R")
autores <- exhibit(base[,campos], name="Nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
library(netCoin)
library(wikiTools)
library(tidyverse)
if(FALSE) {
sites <- data.frame(
url=c("wikipedia.org","wikidata.org","brumario.usal.es","museoreinasofia.es","viaf.org", "bne.es", "isni.org"),
name=c("Wikipedia","Wikidata","USAL","MNCARS","VIAF", "BNE", "ISNI"),
icon=c("https://www.wikipedia.org/static/favicon/wikipedia.ico","https://www.wikidata.org/static/favicon/wikidata.ico",
"https://bibliotecas.usal.es/?q=system/files/imagecache/nodoniv2_thumb/nodoniv2/app.png",
"https://static5.museoreinasofia.es/sites/all/themes/mrs_twitter_bootstrap/images/misc/favicon-32x32.png",
"https://viaf.org/viaf/images/viaf.ico",
"https://datos.bne.es/img/logoBNEpositivo.jpg",
"https://isni.org/images/isni-logo.png")
)
names <- readLines("nombres")
baseQ <- getWikiInf(names)
base <- w_EntityInfo(baseQ$Q, langsorder="es", wikilangs="es")
base$info <- ifelse(is.na(base$wikipedias),"",extractWiki(sub("Paul-Albert", "Albert", base$label),language="es"))
# input <- data.frame(name=base$entity, url=gsub("\\|.*","", base$pic))
# getFiles(input, path="imgs", ext="jpg")
base$description <- paste0(toupper(substr(base$description, 1, 1)), substr(base$description, 2, nchar(base$description)))
base$wikidata <- paste0("https://m.wikidata.org/wiki/",base$entity)
base$wiki <- sub("\\.wikipedia",".m.wikipedia", base$wikipedias)
base$image <- ifelse(is.na(base$pic), "imgs/pintor.jpg", paste0("imgs/", base$entity, ".jpg"))
base$links <- paste0(base$info,
'</p><h3>ENLACES:</h3>', renderLinks(base, c("wikidata", "wiki"), NULL, "mainframe", sites=sites))
base$ventana <- get_template2(base, title="label", title2="description", text="links")
f_A <- c("entity", "label", "description", "sex", "byear", "bcountry", "dyear", "dcountry", "occupation", "bplaceLat", "bplaceLon", "pic",  "wikipedias")
f_E <- c("Q", "Nombre", "Descripción", "Sexo", "Nace", "País nace", "Muere", "País fallece", "Ocupación", "lat", "lon", "imagen", "wiki")
indexes <- match(f_A, names(base))
names(base)[indexes] <- f_E
source("RecodeDisciplinas.R")
} else{
load("Autores.RData")
}
campos <- c("Nombre", "Descripción", "Sexo", "Nace", "País nace", "Muere", "País fallece", "Ocupación", "image", "ventana")
autores <- exhibit(base[,campos], name="Nombre", ntext="ventana", image="image", main = "Autores del impresionismo",
language = "es") %>% plot(dir="~/temp")
